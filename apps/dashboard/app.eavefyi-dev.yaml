runtime: python311
service: dashboard

entrypoint: |-
  gunicorn \
    --bind :$PORT \
    --pythonpath vendor \
    --workers 3 \
    eave.dashboard.app:app

handlers:
  - url: /static
    static_dir: eave/dashboard/static

  - url: /_ah/.*
    login: admin
    script: auto
    auth_fail_action: unauthorized

  - url: .*
    script: auto

inbound_services:
  - warmup

instance_class: B2
basic_scaling:
  max_instances: 1

vpc_access_connector:
  name: projects/eavefyi-dev/locations/us-central1/connectors/appengine

env_variables:
  EAVE_APPS_BASE_PUBLIC: https://apps.eave.dev
  EAVE_API_BASE_PUBLIC: https://api.eave.dev
  EAVE_DASHBOARD_BASE_PUBLIC: https://dashboard.eave.dev
  EAVE_METABASE_BASE_PUBLIC: https://metabase.eave.dev
  LOG_LEVEL: "DEBUG"
