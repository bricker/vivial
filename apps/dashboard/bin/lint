#!/usr/bin/env bash

set -eu

source "${EAVE_HOME}"/develop/functions.bash

(
	python-activate-venv
	cd "${EAVE_HOME}/apps/core"
	mkdir -p .tmp
	"${EAVE_HOME}"/develop/shared/bin/run-with-dotenv -- strawberry export-schema --output .tmp/schema.graphql eave.core.app:schema
)

(
	export GRAPHQL_SCHEMA="${EAVE_HOME}/apps/core/.tmp/schema.graphql"
	cd "$(e.parentpath)"
	"${EAVE_HOME}"/develop/python/_lint_base
	"${EAVE_HOME}"/develop/javascript/_lint_base
	"${EAVE_HOME}"/develop/shared/lint-shell .
	"${EAVE_HOME}"/develop/shared/lint-docker .
)
