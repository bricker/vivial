#!/usr/bin/env bash

set -eu

source "${EAVE_HOME}"/develop/functions.bash

statusmsg -i "Compiling protobuf schemas..."

python -m grpc_tools.protoc --version

python -m grpc_tools.protoc \
	--fatal_warnings \
	--proto_path=protos \
	--python_out=python/src/eave/pubsub_schemas/generated \
	--pyi_out=python/src/eave/pubsub_schemas/generated \
	protos/*

statusmsg -s "Done!"

# TODO: Can we use this for anything?
# https://proto-plus-python.readthedocs.io/en/stable/index.html
